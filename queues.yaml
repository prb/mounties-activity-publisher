# Cloud Tasks queue configuration
# Deploy with: gcloud tasks queues create-app-engine-queue

queue:
  - name: search-queue
    rate_limits:
      max_dispatches_per_second: 0.17  # ~10 requests per minute
      max_concurrent_dispatches: 1
    retry_config:
      max_attempts: 3
      min_backoff: 10s
      max_backoff: 300s
      max_doublings: 3

  - name: scrape-queue
    rate_limits:
      max_dispatches_per_second: 0.5  # ~30 requests per minute
      max_concurrent_dispatches: 5
    retry_config:
      max_attempts: 5
      min_backoff: 5s
      max_backoff: 120s
      max_doublings: 4

  - name: publish-queue
    rate_limits:
      max_dispatches_per_second: 0.08  # ~5 requests per minute (Discord rate limits)
      max_concurrent_dispatches: 1
    retry_config:
      max_attempts: 3
      min_backoff: 2s
      max_backoff: 60s
      max_doublings: 3
